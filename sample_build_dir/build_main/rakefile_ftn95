require 'rake/clean'

include Rake::DSL if defined?(Rake::DSL)

CLEAN.include(FileList['main.exe'])

task :default => [
  :run_main
]

desc "main executable"
file 'main.exe' => ["../main.f90", "../atoz.f90"] do
  sh "ftn95 ..\\atoz.f90 /binary atoz.obj"
  sh "ftn95 ..\\main.f90 /binary main.obj"
  sh "slink atoz.obj main.obj -out:main.exe"
end

task :run_main => "main.exe" do
  sh './main.exe'
end

load "../../rake_base.rb"
