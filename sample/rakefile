require 'rubygems'
require 'fruit_processor'

include Rake::DSL if defined?(Rake::DSL)


task :compile do
  Dir.chdir("src") { 
    sh 'rake'
  }
end

task :test => :compile do
  Dir.chdir("test") { 
    sh 'rake'
    sh './calculator_fruit_driver'
  }
end

task :valgrind => :compile do
  Dir.chdir("test") { 
    sh 'rake'
    sh 'valgrind --leak-check=full ./calculator_fruit_driver'
 }
end

load "#{FruitProcessor.new.base_dir}/rake_base.rb"
include RakeBase

task :default => [:test]
