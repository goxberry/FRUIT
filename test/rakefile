require 'rake/clean'

COMPILER = 'ifort'
goal = 'fruit_driver'

BUILD_DIR='../build'

CLEAN.include(['*.o', '*.mod'])
CLOBBER.include('fruit_driver')

task :default => ["fruit_driver", :deploy]

lib_bases = {'fruit' => $build_dir}

SRC = FileList['*.f90']
OBJ = SRC.ext('o')

# File dependencies go here ...
file 'fruit_driver.o' => ['fruit_data_test.o', 'fruit_test.o']
file 'fruit_data_test.o' => ['fruit_data_test.f90']
file 'fruit_test.o' => ['fruit_test.f90']

task goal => OBJ

load 'rake_fruit.rb'
include RakeFruit

task goal => lib_base_files
